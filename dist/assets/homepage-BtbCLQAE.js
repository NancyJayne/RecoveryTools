import{a5 as l,t as f,J as g,N as u,E as y,a6 as E}from"./index-C-hSlrLx.js";import{s as x}from"./shop-products-_W5G6XBv.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-functions.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";function A(){C(),N(),T(),B()}function C(){const t=document.getElementById("shopNowBtn");t&&t.addEventListener("click",s=>{s.preventDefault(),history.pushState({},"","/shop"),l("shopSection")})}function N(){const t=document.getElementById("ctaAffiliateBtn");t&&t.addEventListener("click",()=>{history.pushState({},"","/contact"),l("contactSection")})}function T(){const t=document.getElementById("backToShopBtn");t&&t.addEventListener("click",()=>{history.pushState({},"","/shop"),l("shopSection")})}async function B(){const t=document.getElementById("featuredToolsGrid");if(!t)return;const s=f(E,"products"),h=g(s,u("type","==","Tool"),u("tags","array-contains","featured"));try{const c=await y(h);if(t.innerHTML="",c.empty){const e=document.createElement("p");e.className="text-gray-400",e.textContent="No featured tools at the moment.",t.appendChild(e);return}c.forEach(e=>{var p;const o=e.data(),r=e.id,n=document.createElement("div");n.className="bg-gray-900 p-4 rounded shadow text-center cursor-pointer hover:shadow-lg transition",n.dataset.productId=r,n.dataset.productFull=JSON.stringify({...o,id:r});const a=document.createElement("img");a.loading="lazy",a.src=((p=o.images)==null?void 0:p[0])||"/default.jpg",a.alt=o.name,a.className="mx-auto mb-2 rounded object-cover h-40 w-full";const i=document.createElement("h3");i.className="font-semibold text-white mb-1",i.textContent=o.name;const d=document.createElement("p");d.className="text-sm text-gray-400",d.textContent=o.shortDescription||"";const m=document.createElement("p");m.className="text-green-400 font-bold mt-2",m.textContent=`$${(o.price||0).toFixed(2)}`,n.append(a,i,d,m),n.addEventListener("click",()=>x({...o,id:r})),t.appendChild(n)})}catch(c){console.error("Failed to load featured tools:",c),t.innerHTML="";const e=document.createElement("p");e.className="text-red-400",e.textContent="Failed to load tools.",t.appendChild(e)}}export{A as initHomepage};
